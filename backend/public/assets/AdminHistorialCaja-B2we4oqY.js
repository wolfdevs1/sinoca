import{r,b as f,j as e,B as b}from"./index-DKdhiWZE.js";import{N as y}from"./react-number-format.es-Dpb0EMf5.js";function C(){const[l,d]=r.useState([]),[c,h]=r.useState(1),p=10,[a,n]=r.useState({searchTerm:"",filterType:"ingreso",page:1}),x=f();r.useEffect(()=>{(async()=>{try{const t=await b(a.page,p,a.searchTerm,a.filterType),{historial:m,pages:u}=t.data;d(m),h(u)}catch(t){console.error(t)}})()},[a]);const j=s=>{n(t=>({...t,searchTerm:s,page:1}))},i=s=>{n(t=>({...t,filterType:s,page:1}))},o=s=>{n(t=>({...t,page:s}))},g=()=>{x("/admin")};return e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"admin-header",children:[e.jsxs("button",{onClick:g,style:{background:"rgba(31, 41, 55, 0.8)",border:"1px solid rgba(75, 85, 99, 0.5)",borderRadius:"8px",padding:"8px 12px",color:"#e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},children:[e.jsx("span",{style:{fontSize:"16px"},children:"←"}),e.jsx("span",{children:"Volver"})]}),e.jsx("div",{className:"titulo-profesional",children:"Historial de Caja"})]}),e.jsxs("div",{className:"admin-controls",children:[e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",className:"search-input",placeholder:"Buscar...",value:a.searchTerm,onChange:s=>j(s.target.value)})}),e.jsxs("div",{className:"filter-container",children:[e.jsx("button",{className:`filter-btn ${a.filterType==="ingreso"?"active":""}`,onClick:()=>i("ingreso"),children:"Ingresos"}),e.jsx("button",{className:`filter-btn ${a.filterType==="egreso"?"active":""}`,onClick:()=>i("egreso"),children:"Egresos"}),e.jsx("button",{className:`filter-btn ${a.filterType==="aporte"?"active":""}`,onClick:()=>i("aporte"),children:"Aportes"}),e.jsx("button",{className:`filter-btn ${a.filterType==="retiro"?"active":""}`,onClick:()=>i("retiro"),children:"Retiros"})]})]}),e.jsx("div",{className:"table-container",children:l.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No hay movimientos que coincidan con los filtros"})}):e.jsxs("table",{className:"historial-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cuenta"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Importe"}),e.jsx("th",{children:"Fecha"})]})}),e.jsx("tbody",{children:l.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.account||s.withdrawAccount}),e.jsx("td",{children:s.descripcion}),e.jsx("td",{children:e.jsx(y,{value:s.amount,displayType:"text",thousandSeparator:".",decimalSeparator:",",prefix:"$"})}),e.jsx("td",{children:new Date(s.createdAt).toLocaleString("es-AR",{hour12:!1})})]},s._id))})]})}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{disabled:a.page<=1,onClick:()=>o(a.page-1),children:"←"}),e.jsxs("span",{children:[a.page," / ",c]}),e.jsx("button",{disabled:a.page>=c,onClick:()=>o(a.page+1),children:"→"})]})]})}export{C as default};
