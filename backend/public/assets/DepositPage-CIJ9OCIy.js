import{r as o,A as C,j as e,L as A,F as j,v as b,w as v}from"./index-iPB-1_v2.js";import{L as N,y as r}from"./index-8h_sTz4R.js";import{N as S}from"./react-number-format.es-D7eDMOBm.js";function w(){const[x,u]=o.useState(""),[p,d]=o.useState(""),{user:g}=o.useContext(C),[c,m]=o.useState(!1),[n,f]=o.useState(null),y=async t=>{var a,s;t.preventDefault();try{m(!0);const l=parseFloat(p.toString().replace(/,/g,"")).toString(),i=await v({user:g,amount:l});r.success(i.data.message),u(""),d("")}catch(l){const i=(s=(a=l.response)==null?void 0:a.data)==null?void 0:s.error;r.error(i||"Error interno del servidor")}finally{m(!1)}},h=()=>{const t=n.alias,a="alias-copy-toast";if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{r.success("Alias copiado al portapapeles!",{toastId:a,autoClose:2e3})}).catch(()=>{r.error("Error al copiar al portapapeles",{toastId:a,autoClose:3e3})});else{const s=document.createElement("textarea");s.style.position="absolute",s.style.left="-9999px",s.value=t,document.body.appendChild(s),s.select();try{document.execCommand("copy"),r.success("Alias copiado al portapapeles!",{toastId:a,autoClose:2e3})}catch{r.error("Error al copiar al portapapeles",{toastId:a,autoClose:3e3})}document.body.removeChild(s)}};return o.useEffect(()=>{(async()=>{try{const{data:a}=await b();f(a)}catch(a){console.error("Error al obtener usuarios:",a)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"form-header",children:[e.jsx(A,{to:"/",className:"circle-back-button",title:"Volver al inicio",children:e.jsx(j,{})}),e.jsx("h1",{className:"page-title",children:"CARGA"})]}),e.jsx("p",{children:"🏦 Realice la transferencia a la siguiente cuenta"}),e.jsxs("p",{className:"copy-alias",onClick:h,children:["👤 TITULAR: ",n?n.name:"Cargando..."]}),e.jsxs("p",{className:"copy-alias",onClick:h,children:["🔗 ALIAS: ",n?n.alias:"Cargando...",e.jsx("span",{className:"copy-icon",title:"Copiar alias",children:"📌"})]}),e.jsx("p",{className:"warning",children:"⚠️ El ALIAS puede cambiar con el tiempo ⚠️"}),e.jsx("p",{children:"Una vez realizada la transferencia, complete los siguientes datos 👇👇👇"}),e.jsx(S,{value:p,onValueChange:t=>{d(t.value)},prefix:"$ ",thousandSeparator:".",decimalSeparator:",",allowNegative:!1,className:"input",placeholder:"Importe transferido",required:!0}),e.jsx("input",{value:x,onChange:t=>u(t.target.value),className:"input",type:"text",placeholder:"Titular de la cuenta",required:!0}),e.jsx("div",{className:"btn-group",children:e.jsx("button",{className:`btn ${c?"gray":""}`,type:"submit",disabled:c,children:c?"Cargando...":"Cargar"})})]}),e.jsx(N,{})]})}export{w as default};
