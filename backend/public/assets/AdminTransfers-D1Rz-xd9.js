import{r,b as v,j as e,q as b,s as S}from"./index-CyJ2xu8D.js";import{N as x}from"./react-number-format.es-CpGC9Bof.js";function T(){const[n,l]=r.useState([]),[d,m]=r.useState(1),p=10,[t,i]=r.useState({searchTerm:"",filterStatus:"unused",page:1}),j=v(),o=async s=>{if(window.confirm("¿Seguro que querés eliminar esta transferencia?"))try{await b(s),l(a=>a.filter(c=>c._id!==s))}catch(a){console.error(a),alert("Error al eliminar la transferencia")}};r.useEffect(()=>{(async()=>{try{const a=await S(t.page,p,t.searchTerm,t.filterStatus),{transfers:c,pages:f}=a.data;l(c),m(f)}catch(a){console.error(a)}})()},[t]);const g=s=>{i(a=>({...a,searchTerm:s,page:1}))},h=s=>{i(a=>({...a,filterStatus:s,page:1}))},u=s=>{i(a=>({...a,page:s}))},N=()=>{j("/admin")};return e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"admin-header",children:[e.jsxs("button",{onClick:N,style:{background:"rgba(31, 41, 55, 0.8)",border:"1px solid rgba(75, 85, 99, 0.5)",borderRadius:"8px",padding:"8px 12px",color:"#e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},children:[e.jsx("span",{style:{fontSize:"16px"},children:"←"}),e.jsx("span",{children:"Volver"})]}),e.jsx("div",{className:"titulo-profesional",children:"Transferencias"})]}),e.jsxs("div",{className:"admin-controls",children:[e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",className:"search-input",placeholder:"Buscar...",value:t.searchTerm,onChange:s=>g(s.target.value)})}),e.jsxs("div",{className:"filter-container",children:[e.jsx("button",{className:`filter-btn ${t.filterStatus==="unused"?"active":""}`,onClick:()=>h("unused"),children:"Sin usar"}),e.jsx("button",{className:`filter-btn ${t.filterStatus==="used"?"active":""}`,onClick:()=>h("used"),children:"Usadas"})]})]}),e.jsx("div",{className:"table-container desktop-view",children:n.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No hay transferencias que coincidan con los filtros"})}):e.jsxs("table",{className:"retiros-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Usuario"}),e.jsx("th",{children:"Cuenta"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Fecha ingreso"}),e.jsx("th",{children:"Fecha reclamo"})]})}),e.jsx("tbody",{children:n.map(s=>e.jsxs("tr",{className:s.used?"completed":"pending",children:[e.jsx("td",{className:"user-name",children:s.user}),e.jsx("td",{className:"user-name",children:s.account}),e.jsx("td",{className:"amount",children:e.jsx(x,{value:s.amount,displayType:"text",thousandSeparator:".",decimalSeparator:",",prefix:"$"})}),e.jsx("td",{children:new Date(s.createdAt).toLocaleString("es-AR",{hour12:!1})}),e.jsx("td",{children:s.used?new Date(s.updatedAt).toLocaleString("es-AR",{hour12:!1}):"-"}),!s.used&&e.jsx("td",{children:e.jsx("button",{className:"delete-transfer",onClick:()=>o(s._id),children:"🗑 Eliminar"})})]},s._id))})]})}),e.jsx("div",{className:"mobile-view",children:n.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No hay transferencias que coincidan con los filtros"})}):e.jsx("div",{className:"cards-container",children:n.map(s=>e.jsx("div",{className:`withdraw-card ${s.used?"completed":"pending"}`,children:e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"user-info",children:[e.jsx("h3",{className:"card-user-name",children:s.user}),e.jsx("p",{className:"card-user-alias",children:s.account})]}),e.jsx("div",{className:"card-amount",children:e.jsx(x,{value:s.amount,displayType:"text",thousandSeparator:".",decimalSeparator:",",prefix:"$"})}),e.jsxs("div",{className:"card-dates",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ingreso:"})," ",new Date(s.createdAt).toLocaleString("es-AR",{hour12:!1})]}),s.used&&e.jsxs("p",{children:[e.jsx("strong",{children:"Reclamado:"})," ",new Date(s.updatedAt).toLocaleString("es-AR",{hour12:!1})]}),!s.used&&e.jsx("button",{onClick:()=>o(s._id),className:"delete-button",children:"🗑 Eliminar"})]})]})},s._id))})}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{disabled:t.page<=1,onClick:()=>u(t.page-1),children:"←"}),e.jsxs("span",{children:[" ",t.page," / ",d," "]}),e.jsx("button",{disabled:t.page>=d,onClick:()=>u(t.page+1),children:"→"})]})]})}export{T as default};
